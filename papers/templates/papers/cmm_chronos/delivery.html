{% load humanize %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Delivery Note | {{ entry.company.name }}</title>

<style>
    /* PDF Page Configuration */
    @page {
        size: A4;
        margin: 20mm 15mm 20mm 15mm;
    }

    body {
        font-family: Calibri, Arial, sans-serif;
        font-size: 12.5px;
        color: #000;
        margin: 0;
        padding: 0;
        position: relative; /* Essential for absolute positioning */
    }

    .container {
        width: 100%;
        position: relative;
    }

    /* Formal "Outside Boundary" Identification Styling - No Border */
    .outside-id-badge {
        position: absolute;
        top: -45px;
        right: 0;
        font-size: 18px;
        font-weight: bold;
        color: #000;
        padding: 5px 0;
        background-color: #fff;
        z-index: 100;
        text-transform: uppercase;
    }

    .header-table, .info-table, .items-table, .signature-table {
        width: 100%;
        border-collapse: collapse;
    }

    .header-table td {
        vertical-align: top;
    }

    .company-name {
        font-size: 22px;
        font-weight: bold;
        text-transform: uppercase;
        line-height: 1;
    }

    .header-details {
        font-size: 11.5px;
        margin-top: 5px;
    }

    .logo img {
        max-height: 70px;
        float: right;
    }

    .section-title {
        font-weight: bold;
        font-size: 14px;
        margin: 15px 0 5px;
        border-bottom: 2px solid #000;
        padding-bottom: 3px;
        text-transform: uppercase;
    }

    .info-table td {
        width: 50%;
        padding: 8px 4px;
        vertical-align: top;
    }

    .items-table th,
    .items-table td {
        border: 1px solid #000;
        padding: 8px 6px;
    }

    .items-table th {
        background: #f2f2f2;
        text-align: left;
        font-weight: bold;
        text-transform: uppercase;
        font-size: 11px;
    }

    .signature-table {
        margin-top: 80px;
        text-align: center;
    }

    .signature-line {
        border-top: 1px solid #000;
        padding-top: 5px;
        margin-top: 40px;
        font-size: 11px;
        font-weight: bold;
    }

    .no-print {
        text-align: right;
        margin-bottom: 20px;
    }

    .no-print a {
        padding: 8px 16px;
        background: #0f2a44;
        color: #fff;
        text-decoration: none;
        font-weight: bold;
        font-size: 11px;
        border-radius: 2px;
    }

    @media print {
        .no-print { display: none; }
        .outside-id-badge { top: -45px; }
    }
</style>
</head>

<body>
<div class="container">

<div class="no-print">
    <a href="{% url 'paper_pdf' entry.id 'delivery' %}" target="_blank">
        DOWNLOAD PDF
    </a>
</div>

<!-- FORMAL FLOATING ID BADGE -->
<div class="outside-id-badge">
    DL NO: {{ entry.paper_number }}
</div>

<table class="header-table">
<tr>
    <td>
        <div class="company-name">{{ entry.company.name }}</div>
        <div class="header-details">
            {{ entry.company.address|linebreaksbr }}<br>
            <strong>Tel:</strong> {{ entry.company.phone }}<br>
            <strong>Email:</strong> {{ entry.company.email }}
        </div>
    </td>
    <td class="logo">
        {% if entry.company.logo %}
            {% if is_pdf %}
                <img src="file://{{ entry.company.logo.path }}">
            {% else %}
                <img src="{{ entry.company.logo.url }}">
            {% endif %}
        {% endif %}
    </td>
</tr>
</table>

<div class="section-title">DELIVERY NOTE</div>

<table class="info-table">
<tr>
    <td>
        <strong>Delivery Note No:</strong> {{ entry.paper_number }}<br>
        <strong>Date:</strong> {{ entry.date|date:"d M Y" }}
    </td>
    <td>
        <strong>Delivered To:</strong><br>
        <span style="font-size: 14px; font-weight: bold;">{{ entry.client.name }}</span><br>
        {{ entry.client.address|linebreaksbr }}
    </td>
</tr>
</table>

<table class="items-table">
<thead>
<tr>
    <th style="width:5%">#</th>
    <th>Description of Goods</th>
    <th style="width:15%">Quantity</th>
</tr>
</thead>
<tbody>
{% for item in entry.items.all %}
<tr>
    <td>{{ forloop.counter }}</td>
    <td>{{ item.description }}</td>
    <td>{{ item.quantity|floatformat:0 }}</td>
</tr>
{% endfor %}
</tbody>
</table>

<table class="signature-table">
<tr>
    <td>
        <div class="signature-line">Delivered By</div>
    </td>
    <td>
        <div class="signature-line">Received By (Sign & Stamp)</div>
    </td>
    <td>
        <div class="signature-line">Date / Time</div>
    </td>
</tr>
</table>

</div>
</body>
</html>